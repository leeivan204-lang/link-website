<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>網頁連結轉運站 | Link Aggregation</title>
    <link rel="stylesheet" href="./static/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" type="image/png" href="./static/favicon.png">
</head>

<body>

    <div class="container">
        <header class="newsprint-header">
            <div class="header-meta">
                <span>第一版 Vol. 1.0</span>
                <span>台北發行 Taipei Edition</span>
                <span id="date-display">2026-01-05</span>
            </div>
            <h1 class="title-display">網頁連結轉運站</h1>
            <p class="subtitle">"所有值得一點的連結"</p>
        </header>

        <!-- Notice Board Section -->
        <section class="notice-board-section">
            <div class="notice-label">重要事項提醒</div>
            <div class="notice-content" id="noticeDisplay">
                <span style="color: var(--neutral-500); font-weight: normal; font-size: 1rem;">(正在讀取公告...)</span>
            </div>

            <div class="notice-edit-group editor-only" style="display: none;">
                <input type="text" id="noticeInput" class="notice-input" placeholder="更新公告內容...">
                <button type="button" id="saveNoticeBtn" class="notice-btn">新增</button>
                <button type="button" id="clearNoticeBtn" class="notice-btn"
                    style="color: var(--editorial-red);">清除</button>
            </div>
        </section>

        <section class="input-section editor-only" style="display: none;">
            <div class="input-group">
                <input type="text" id="urlInput" class="editorial-input" placeholder="在此貼上網址..." autocomplete="off">
                <input type="text" id="titleInput" class="editorial-input" placeholder="網站標題 (必填)..."
                    autocomplete="off">
                <input type="text" id="descInput" class="editorial-input" placeholder="網站描述/備註 (選填)..."
                    autocomplete="off">
                <div style="display: flex; gap: 0.5rem;">
                    <input type="text" id="imgInput" class="editorial-input" placeholder="圖片網址 (選填)..."
                        autocomplete="off" style="flex: 1;">
                    <label for="imgUpload" class="editorial-btn"
                        style="width: auto; padding: 0 1rem; display: flex; align-items: center; justify-content: center; cursor: pointer; margin: 0;">
                        <i class="fas fa-camera"></i>
                    </label>
                    <input type="file" id="imgUpload" accept="image/*" style="display: none;">
                </div>
                <input type="text" id="linkNoteInput" class="editorial-input" placeholder="連結注意事項 (如: 1/15 需閱讀)..."
                    autocomplete="off">
            </div>
            <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                <button type="button" id="addBtn" class="editorial-btn" style="flex: 2;">發布連結</button>
                <button type="button" id="exportBtn" class="editorial-btn"
                    style="flex: 1; background-color: var(--neutral-600);">匯出資料</button>
            </div>
        </section>

        <main id="cardsContainer" class="news-grid">
            <div class="loading-indicator" id="js-loading-indicator">
                [ 系統狀態：正在讀取本機資料庫... ]
            </div>
        </main>

        <footer>
            <span>&copy; 2026 網頁連結轉運站專案. 數位印刷發行</span>
            <br><br>
            <a href="login.html" id="authLink"
                style="color: var(--neutral-500); text-decoration: none; font-size: 0.7rem;">[ 編輯者登入 ]</a>
        </footer>
    </div>

    <!-- System Status Toast -->
    <div id="systemStatus" style="display: none;"></div>

    <!-- Custom Confirm Modal -->
    <div id="customConfirmModal" class="modal-overlay" style="display: none;">
        <div class="modal-box">
            <h3 class="modal-title">確認操作</h3>
            <p id="modalMessage" class="modal-message">確定要執行此動作嗎？</p>
            <div class="modal-actions">
                <button id="modalCancelBtn" class="notice-btn">取消</button>
                <button id="modalConfirmBtn" class="notice-btn"
                    style="background: var(--ink-black); color: white;">確定</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK Compat -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

    <script src="./static/script.js"></script>
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAST9xMgg29racOqe3ivFRUZN8NU-GMoZQ",
            authDomain: "software-73cc3.firebaseapp.com",
            projectId: "software-73cc3",
            storageBucket: "software-73cc3.firebasestorage.app",
            messagingSenderId: "869562371892",
            appId: "1:869562371892:web:44c9152789762350d01f61",
            measurementId: "G-5JCJDTR6FE"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // Make globally available for script.js
        window.db = db;
        window.auth = auth;

        // Simple script to set today's date in proper format
        const dateDisplay = document.getElementById('date-display');
        const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
        dateDisplay.textContent = new Date().toLocaleDateString('zh-TW', options);
    </script>
</body>

</html>